<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>exceptions.php</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<style type="text/css">
<!--
body {color: #000000; background-color: #ffffff; font-family: Monospaced}
pre {color: #000000; background-color: #ffffff; font-family: Monospaced}
table {color: #000000; background-color: #e9e8e2; font-family: Monospaced}
.ST0 {font-family: Monospaced; font-weight: bold}
.PHP_VARIABLE {color: #6d3206}
.comment {color: #969696}
.string {color: #ce7b00}
.keyword {color: #0000e6}
-->
</style>
</head>
<body>
<table width="100%"><tr><td align="center">/var/dev/pdevcs/concepts/advoo/exceptions.php</td></tr></table>
<pre>
<span class="ST0">&lt;?php</span>

<span class="keyword">function</span> Login(<span class="PHP_VARIABLE">$pass</span>, <span class="PHP_VARIABLE">$confpass</span>) {
    <span class="keyword">if</span>(<span class="PHP_VARIABLE">$pass</span> != <span class="PHP_VARIABLE">$confpass</span>) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    } <span class="keyword">else</span> {
        <span class="comment">//</span><span class="comment">auth</span>
    }
}

<span class="keyword">function</span> GetUser() {
    <span class="keyword">if</span>(DbHasFailed()) {
        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&#39;Database Failure!&#39;</span>);
    }
}


<span class="keyword">if</span>(Login(1, 2)) {
    <span class="comment">//</span><span class="comment">...</span>
} <span class="keyword">else</span> {
    <span class="comment">//</span><span class="comment">redirect to login page</span>
}


<span class="keyword">try</span> {
    GetUser();
} <span class="keyword">catch</span> (Exception <span class="PHP_VARIABLE">$e</span>) {
    <span class="comment">//</span><span class="comment">...gracefully exit</span>
}


<span class="keyword">class</span> MyException <span class="keyword">extends</span> Exception {
    
}

<span class="keyword">function</span> error_prone() {
    <span class="keyword">if</span>(rand(0,1)) {
        <span class="keyword">throw</span> <span class="keyword">new</span> MyException();
    } <span class="keyword">else</span> {
        <span class="keyword">throw</span> <span class="keyword">new</span> Exception();
    }
}

<span class="keyword">try</span> {
    error_prone();
} <span class="keyword">catch</span>(MyException <span class="PHP_VARIABLE">$e</span>) {
    <span class="keyword">echo</span> <span class="PHP_VARIABLE">$e</span>-&gt;message();
} <span class="keyword">catch</span>(Exception <span class="PHP_VARIABLE">$e</span>) {
    <span class="keyword">echo</span> <span class="PHP_VARIABLE">$e</span>-&gt;message();
}

</pre></body>
</html>
